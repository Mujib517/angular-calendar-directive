var app=angular.module("calendarControl",[]);app.directive("myCalendar",function(){return{restrict:"E",templateUrl:"/Calendar-Directive/directive/template.html",scope:{month:"=",year:"=",onSelect:"&",date:"=",config:"="},link:function(a,b,c){var d,e,f=[];a.monthObj=[{name:"Jan",no:1},{name:"Feb",no:2},{name:"Mar",no:3},{name:"Apr",no:4},{name:"May",no:5},{name:"Jun",no:6},{name:"Jul",no:7},{name:"Aug",no:8},{name:"Sep",no:9},{name:"Oct",no:10},{name:"Nov",no:11},{name:"Dec",no:12}];var g=a.date,h=function(){if(g){var b=g.split("/"),c=parseInt(b[0]),f=parseInt(b[1]),h=parseInt(b[2]);e==c&&d==h&&(a.$apply(),$("#"+f).removeClass("today"),$("#"+f).addClass("selected"))}},i=function(){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.monthName=b[parseInt(e)-1],a.year=d},j=function(){var b=a.config;b?(a.showMonthSelection=b.monthSelection===!1?!1:!0,a.showYearSelection=b.yearSelection===!1?!1:!0,a.navigation=b.navigation===!1?!0:!1):(a.showMonthSelection=!0,a.showYearSelection=!0,a.navigation=!1)};a.selectDate=function(c){if(c){var f=e+"/"+c+"/"+d;b.find("td").removeClass("selected"),b.find("td").removeClass("today"),$("#"+c).addClass("selected"),g=f,a.onSelect({dt:f})}};var k=function(){var b=[];a.month=e,a.year=d;for(var c=new Date(d+"-"+e+"-01").getDay(),f=new Date(d,e,0).getDate(),g=[],h=0;c>h;h++)g.push("");for(var j=1;f>=j;j++)g.push(j);if(g.length>35)for(var k=g.length;42>k;k++)g.push("");else if(g.length>28)for(var l=g.length;35>l;l++)g.push("");for(var n=0;5>n;n++)b.push(g.slice(7*n,7*n+7));g.length>35&&b.push(g.slice(35,g.length)),a.weeks=b,m(),i()},l=function(){if(a.date){var b=a.date.split("/");e=parseInt(b[0]),d=b[2],k()}else e=a.month,d=a.year,k();j()},m=function(){var b=new Date,c=b.getMonth()+1,f=b.getFullYear(),g=b.getDate();10>c&&(c="0"+c.toString()),e==c&&d==f&&(a.$apply(),$("#"+g).addClass("today"))},n=function(){if(a.date){a.$apply();var b=a.date.split("/");$("#"+parseInt(b[1])).removeClass("today"),$("#"+parseInt(b[1])).addClass("selected")}},o=function(){a.years=[];for(var b=0;5>b;b++)a.years.push(f.slice(7*b,7*b+7))};a.prev=function(){e>1?e--:(e=12,d--),k(),h()},a.next=function(){12>e?e++:(e=1,d++),k(),h()},a.showYears=function(b){a.yearMode=!0;for(var c=b;b+35>c;c++)f.push(c);o()},a.changeYear=function(b){a.year=b,d=b,a.yearMode=!1,k()},a.prevYear=function(){var b=f[0],c=b-35;if(b>1500){f=[];for(var d=b;d>c;d--)f.push(d);f.reverse(),o(),a.$apply()}},a.nextYear=function(){var b=f[34],c=b+35;if(3e3>b){f=[];for(var d=b;c>d;d++)f.push(d);o(),a.$apply()}},a.changeMonth=function(a){e=a,k()},l(),n()}}}),function(a,b){a["directive/template.html"]='<style>\n    .selected {\n        background-color: #696969;\n        color:white;\n    }\n\n    .cursor-hand {\n        cursor: pointer;\n        cursor: hand;\n    }\n\n    .today {\n        background-color: #F8F8F8;\n    }\n\n    .btn-width {\n        width: 80px;\n    }\n    .input-xs {\n        height: 22px;\n        padding: 2px 5px;\n        font-size: 12px;\n        line-height: 1.5;\n        border-radius: 3px;\n    }\n    #tblMnth{\n        table-layout: fixed;\n    }\n    #tblMnth tr{\n        white-space: nowrap;\n    }\n</style>\n<div ng-show="!yearMode">\n    <table id="tblMnth" class="table table-bordered table-condensed">\n        <tr>\n            <td colspan="2">\n                <div class="pull-left">\n                    <select ng-show="showMonthSelection" class="form-control input-xs" ng-model="month" ng-options="mth.no as mth.name for mth in monthObj" ng-change="changeMonth(month)"/>\n                    <strong class="strong" ng-show="!showMonthSelection">{{monthName}}</strong>\n                </div>\n            </td>\n            <td colspan="3">\n                <div class="pull-left">\n                    <button ng-show="showYearSelection" class="btn btn-xs btn-width btn-primary" ng-click="showYears(year)">\n                        <span>{{year}}</span>\n                    </button>\n                    <strong class="strong" ng-show="!showYearSelection">{{year}}</strong>\n                </div>\n            </td>\n            <td colspan="2" >\n                <div class="btn-group pull-right">\n                    <button ng-disabled="navigation" class="btn btn-sm btn-default btn-xs" type="button" ng-click="prev()">\n                        <span class="glyphicon glyphicon-chevron-left"></span>\n                    </button>\n                    <button ng-disabled="navigation" class="btn btn-sm btn-default btn-xs" type="button" ng-click="next()">\n                        <span class="glyphicon glyphicon-chevron-right"></span>\n                    </button>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <th>Sun</th>\n            <th>Mon</th>\n            <th>Tue</th>\n            <th>Wed</th>\n            <th>Thu</th>\n            <th>Fri</th>\n            <th>Sat</th>\n        </tr>\n        <tr ng-repeat="week in weeks">\n            <td ng-class="text-right" id=\'{{day}}\' class="cursor-hand" ng-repeat="day in week track by $index" ng-click="selectDate(day)">\n               <span class="pull-right">\n                   {{day}}\n               </span>\n            </td>\n        </tr>\n    </table>\n</div>\n<div ng-show="yearMode">\n    <table class="table table-bordered table-condensed">\n        <tr>\n            <th colspan="7">\n                Select Year\n                <div class="btn-group pull-right">\n                    <button class="btn btn-sm btn-default btn-xs" type="button" ng-click="prevYear()">\n                        <span class="glyphicon glyphicon-chevron-left"></span>\n                    </button>\n                    <button class="btn btn-sm btn-default btn-xs" type="button" ng-click="nextYear()">\n                        <span class="glyphicon glyphicon-chevron-right"></span>\n                    </button>\n                </div>\n            </th>\n        </tr>\n        <tr ng-repeat="year in years">\n            <td ng-repeat="yr in year">\n                <button class="btn btn-default btn-xs" ng-click="changeYear(yr)">\n                    <span>{{yr}}</span>\n                </button>\n            </td>\n        </tr>\n    </table>\n</div>'}(this.templates=this.templates||{});